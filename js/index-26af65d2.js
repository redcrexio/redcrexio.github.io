var Fe=Object.defineProperty;var Ue=(I,T,E)=>T in I?Fe(I,T,{enumerable:!0,configurable:!0,writable:!0,value:E}):I[T]=E;var c=(I,T,E)=>(Ue(I,typeof T!="symbol"?T+"":T,E),E);(async()=>{var mt;(function(){const w=document.createElement("link").relList;if(w&&w.supports&&w.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const I=Array,T=1e-6,E=Math.PI,pt=Math.tan,$=Math.hypot,ft=Math.acos,j=Math.sin,H=Math.cos,D=Math.sqrt,Y=Math.min,K=Math.max,gt=Math.floor;class k extends WeakMap{set(t,e,i){if("dispose"in t&&typeof t.dispose=="function"){const s=t.dispose.bind(t);t.dispose=()=>{i==null||i(),s(),this.delete(t)}}return super.set(t,e)}}class q extends I{constructor(){super(16),this.identity()}set(...t){for(let e=0;e<16;e++)this[e]=t[e];return this}copy(t){return this.set(...t)}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}multiply(t){if(typeof t=="number")for(let e=0;e<16;e++)this[e]*=t;else{const[e,i,s,r,a,n,o,h,l,p,m,f,d,g,x,y]=this,[u,_,v,M,z,A,F,U,b,P,S,V,C,R,W,X]=t;this.set(e*u+a*_+l*v+d*M,i*u+n*_+p*v+g*M,s*u+o*_+m*v+x*M,r*u+h*_+f*v+y*M,e*z+a*A+l*F+d*U,i*z+n*A+p*F+g*U,s*z+o*A+m*F+x*U,r*z+h*A+f*F+y*U,e*b+a*P+l*S+d*V,i*b+n*P+p*S+g*V,s*b+o*P+m*S+x*V,r*b+h*P+f*S+y*V,e*C+a*R+l*W+d*X,i*C+n*R+p*W+g*X,s*C+o*R+m*W+x*X,r*C+h*R+f*W+y*X)}return this}determinant(){const[t,e,i,s,r,a,n,o,h,l,p,m,f,d,g,x]=this,y=t*a-e*r,u=t*n-i*r,_=e*n-i*a,v=h*d-l*f,M=h*g-p*f,z=l*g-p*d,A=t*z-e*M+i*v,F=r*z-a*M+n*v,U=h*_-l*u+p*y,b=f*_-d*u+g*y;return o*A-s*F+x*U-m*b}transpose(){const[t,e,i,s,r,a,n,o,h,l,p,m,f,d,g,x]=this;return this.set(t,r,h,f,e,a,l,d,i,n,p,g,s,o,m,x)}invert(){const[t,e,i,s,r,a,n,o,h,l,p,m,f,d,g,x]=this,y=t*a-e*r,u=t*n-i*r,_=t*o-s*r,v=e*n-i*a,M=e*o-s*a,z=i*o-s*n,A=h*d-l*f,F=h*g-p*f,U=h*x-m*f,b=l*g-p*d,P=l*x-m*d,S=p*x-m*g,V=this.determinant();return V?this.set(a*S-n*P+o*b,i*P-e*S-s*b,d*z-g*M+x*v,p*M-l*z-m*v,n*U-r*S-o*F,t*S-i*U+s*F,g*_-f*z-x*u,h*z-p*_+m*u,r*P-a*U+o*A,e*U-t*P-s*A,f*M-d*_+x*y,l*_-h*M-m*y,a*F-r*b-n*A,t*b-e*F+i*A,d*u-f*v-g*y,h*v-l*u+p*y).multiply(1/V):this}perspective(t,e,i,s){const r=t*(E/180),a=1/pt(r/2),n=1/(i-s);return this.set(a/e,0,0,0,0,a,0,0,0,0,(s+i)*n,-1,0,0,2*s*i*n,0)}orthogonal(t,e,i,s,r,a){const n=1/(t-e),o=1/(i-s),h=1/(r-a);return this.set(-2*n,0,0,0,0,-2*o,0,0,0,0,2*h,0,(t+e)*n,(s+i)*o,(a+r)*h,1)}compose(t,e,i){const s=2*e.x*e.x,r=2*e.y*e.x,a=2*e.z*e.x,n=2*e.y*e.y,o=2*e.z*e.y,h=2*e.z*e.z,l=2*e.x*e.w,p=2*e.y*e.w,m=2*e.z*e.w;return this.set((1-(n+h))*i.x,(r+m)*i.x,(a-p)*i.x,0,(r-m)*i.y,(1-(s+h))*i.y,(o+l)*i.y,0,(a+p)*i.z,(o-l)*i.z,(1-(s+n))*i.z,0,t.x,t.y,t.z,1)}normal(t){const[e,i,s,r,a,n,o,h,l,p,m,f,d,g,x,y]=t,u=e*n-i*a,_=e*o-s*a,v=e*h-r*a,M=i*o-s*n,z=i*h-r*n,A=s*h-r*o,F=l*g-p*d,U=l*x-m*d,b=l*y-f*d,P=p*x-m*g,S=p*y-f*g,V=m*y-f*x,C=t.determinant();return C?this.set(n*V-o*S+h*P,s*S-i*V-r*P,g*A-x*z+y*M,0,o*b-a*V-h*U,e*V-s*b+r*U,x*v-d*A-y*_,0,a*S-n*b+h*F,i*b-e*S-r*F,d*z-g*v+y*u,0,0,0,0,1).multiply(1/C):this}normalNDC(){return this[8]+=this[12]/=2,this[9]+=this[13]/=2,this[10]+=this[14]/=2,this[11]+=this[15]/=2,this}}class L extends I{constructor(t=0,e=0,i=0){super(3),this.set(t,e,i)}get x(){return this[0]}set x(t){this[0]=t}get y(){return this[1]}set y(t){this[1]=t}get z(){return this[2]}set z(t){this[2]=t}set(...t){for(let e=0;e<3;e++)this[e]=t[e];return this}copy(t){return this.set(...t)}add(t){for(let e=0;e<3;e++)this[e]+=typeof t=="number"?t:t[e];return this}sub(t){for(let e=0;e<3;e++)this[e]-=typeof t=="number"?t:t[e];return this}multiply(t){for(let e=0;e<3;e++)this[e]*=typeof t=="number"?t:t[e];return this}divide(t){for(let e=0;e<3;e++)this[e]/=typeof t=="number"?t:t[e];return this}invert(){return this.multiply(-1)}getLength(){return $(...this)}normalize(){return this.divide(this.getLength()||1)}distanceTo(t){return $(this.x-t.x,this.y-t.y,this.z-t.z)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}cross(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)}lerp(t,e){return this.set(t.x-this.x,t.y-this.y,t.z-this.z).multiply(e)}applyQuaternion(t){const e=t.w*this.x+t.y*this.z-t.z*this.y,i=t.w*this.y+t.z*this.x-t.x*this.z,s=t.w*this.z+t.x*this.y-t.y*this.x,r=-t.x*this.x-t.y*this.y-t.z*this.z;return this.set(e*t.w+r*-t.x+i*-t.z-s*-t.y,i*t.w+r*-t.y+s*-t.x-e*-t.z,s*t.w+r*-t.z+e*-t.y-i*-t.x)}applyMatrix4(t){const[e,i,s,r,a,n,o,h,l,p,m,f,d,g,x,y]=t;return this.set(e*this.x+a*this.y+l*this.z+d,i*this.x+n*this.y+p*this.z+g,s*this.x+o*this.y+m*this.z+x).divide(r*this.x+h*this.y+f*this.z+y||1)}}class xt extends I{constructor(e=0,i=0,s=0,r=1){super(4);c(this,"_a",new L);c(this,"_b",new L);c(this,"_c",new L);this.set(e,i,s,r)}get x(){return this[0]}set x(e){this[0]=e}get y(){return this[1]}set y(e){this[1]=e}get z(){return this[2]}set z(e){this[2]=e}get w(){return this[3]}set w(e){this[3]=e}set(...e){for(let i=0;i<4;i++)this[i]=e[i];return this}copy(e){return this.set(...e)}identity(){return this.set(0,0,0,1)}add(e){for(let i=0;i<4;i++)this[i]+=typeof e=="number"?e:e[i];return this}sub(e){for(let i=0;i<4;i++)this[i]-=typeof e=="number"?e:e[i];return this}multiply(e){if(typeof e=="number")for(let i=0;i<4;i++)this[i]*=e;else{const[i,s,r,a]=this,[n,o,h,l]=e;this.set(i*l+a*n+s*h-r*o,s*l+a*o+r*n-i*h,r*l+a*h+i*o-s*n,a*l-i*n-s*o-r*h)}return this}divide(e){for(let i=0;i<4;i++)this[i]/=typeof e=="number"?e:e[i];return this}invert(){for(let e=0;e<4;e++)this[e]*=-1;return this}getLength(){return $(...this)}normalize(){return this.divide(this.getLength()||1)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}fromEuler(e,i,s){const r=j(e),a=H(e),n=j(i),o=H(i),h=j(s),l=H(s);return this.set(r*o*l+a*n*h,a*n*l-r*o*h,a*o*h+r*n*l,a*o*l-r*n*h)}slerp(e,i){let s=this.dot(e);s<0&&(s*=-1);let r=1-i,a=i;if(1-s>T){const n=ft(s),o=j(n);r=j((1-i)*n)/o,a=j(i*n)/o}return s<0&&(a*=-1),this.set(r*this.x+a*e.x,r*this.y+a*e.y,r*this.z+a*e.z,r*this.w+a*e.w)}lookAt(e,i,s){const r=this._a.copy(e).sub(i);r.getLength()===0?r.z=1:r.normalize();const a=this._b.copy(s).cross(r);if(a.getLength()===0){const u=this._c.copy(s);u.z?u.x+=T:u.y?u.z+=T:u.y+=T,a.cross(u)}a.normalize();const n=this._c.copy(r).cross(a),[o,h,l]=a,[p,m,f]=n,[d,g,x]=r,y=o+m+x;if(y>0){const u=D(y+1)*2;return this.set((f-g)/u,(d-l)/u,(h-p)/u,u/4)}else if(o>m&&o>x){const u=D(1+o-m-x)*2;return this.set(u/4,(h+p)/u,(d+l)/u,(f-g)/u)}else if(m>x){const u=D(1+m-o-x)*2;return this.set((h+p)/u,u/4,(f+g)/u,(d-l)/u)}else{const u=D(1+x-o-m)*2;return this.set((d+l)/u,(f+g)/u,u/4,(h-p)/u)}}}class J{constructor(){c(this,"matrix",new q);c(this,"quaternion",new xt);c(this,"position",new L);c(this,"scale",new L(1,1,1));c(this,"up",new L(0,1,0));c(this,"children",[]);c(this,"parent",null);c(this,"matrixAutoUpdate",!0);c(this,"visible",!0);c(this,"frustumCulled",!0)}lookAt(t){this.quaternion.lookAt(this.position,t,this.up)}updateMatrix(){if(this.matrixAutoUpdate){this.matrix.compose(this.position,this.quaternion,this.scale),this.parent&&this.matrix.multiply(this.parent.matrix);for(const t of this.children)t.updateMatrix()}}add(...t){for(const e of t)this.children.push(e),e.parent=this}remove(...t){for(const e of t){const i=this.children.indexOf(e);i!==-1&&this.children.splice(i,1),e.parent=null}}traverse(t){if(!t(this))for(const e of this.children)e.traverse(t)}}class yt extends I{constructor(){super(24);c(this,"a",new q)}set(...e){for(let i=0;i<24;i++)this[i]=e[i];return this}copy(e){return this.set(...e)}fromMatrix4(e){const[i,s,r,a,n,o,h,l,p,m,f,d,g,x,y,u]=this.a.copy(e);this.set(a-i,l-n,d-p,u-g,a+i,l+n,d+p,u+g,a+s,l+o,d+m,u+x,a-s,l-o,d-m,u-x,a-r,l-h,d-f,u-y,a+r,l+h,d+f,u+y)}contains(e){const{position:i}=e.geometry.attributes,s=i.data.length/i.size;let r=0;for(let a=0;a<s;a+=i.size){let n=0;for(let o=a;o<a+i.size;o++)n+=i.data[o]**2;r=K(r,D(n))}r*=K(...e.scale);for(let a=0;a<6;a++){const n=a*4;if(this[n]*e.matrix[12]+this[n+1]*e.matrix[13]+this[n+2]*e.matrix[14]+this[n+3]<=-r)return!1}return!0}normalNDC(){const e=this.a;return this[20]-=e[3],this[21]-=e[7],this[22]-=e[11],this[23]-=e[15],this}}class wt extends J{constructor(){super(...arguments);c(this,"projectionMatrix",new q);c(this,"viewMatrix",new q);c(this,"projectionViewMatrix",new q);c(this,"frustum",new yt)}updateMatrix(){super.updateMatrix(),this.matrixAutoUpdate&&this.viewMatrix.copy(this.matrix).invert()}}class Z{constructor(t={}){c(this,"drawRange",{start:0,count:1/0});this.attributes=t;for(const e in t)this.attributes[e]=t[e],this.attributes[e].needsUpdate=!0}dispose(){}}class tt{constructor(t){c(this,"uniforms",{});c(this,"vertex");c(this,"fragment");c(this,"compute");c(this,"side","front");c(this,"transparent",!1);c(this,"depthTest",!0);c(this,"depthWrite",!0);c(this,"blending");t!=null&&t.transparent&&(this.blending={color:{operation:"add",srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{operation:"add",srcFactor:"one",dstFactor:"one-minus-src-alpha"}}),Object.assign(this,t)}dispose(){}}class et extends J{constructor(e=new Z,i=new tt){super();c(this,"modelViewMatrix",new q);c(this,"normalMatrix",new q);c(this,"mode","triangles");c(this,"instances",1);this.geometry=e,this.material=i}}class _t extends wt{constructor(t=75,e=1,i=.1,s=1e3){super(),this.fov=t,this.aspect=e,this.near=i,this.far=s}updateMatrix(){super.updateMatrix(),this.matrixAutoUpdate&&this.projectionMatrix.perspective(this.fov,this.aspect,this.near,this.far)}}class vt{constructor(t){c(this,"magFilter","nearest");c(this,"minFilter","nearest");c(this,"wrapS","clamp");c(this,"wrapT","clamp");c(this,"anisotropy",1);c(this,"generateMipmaps",!0);c(this,"needsUpdate",!0);t&&Object.assign(this,t)}}class bt{constructor(t,e=new vt,i,s,r=!0){this.image=t,this.sampler=e,this.format=i,this.type=s,this.needsUpdate=r}dispose(){}}const N=36160,zt=36064,B=3553,Mt=10240,At=10241,Ft=10242,Ut=10243,St=6408,Q=2929,it=2884,st=3042,Tt=3317,Pt=35633,Vt=35632,It=34963,rt=34962,Et=35044,kt=35048,qt=16384,Lt=256,Ct=1024,jt=513,Dt=1028,Bt=1029,Nt=33984,Ot=0,at=36386,Rt=35982,Wt=35981,nt=35977,Xt=9728,$t=9729,ot={nearest:Xt,linear:$t},Ht=9985,Yt=9986,Kt={nearest:Ht,linear:Yt},Qt=10497,Gt=33071,Jt=33648,ht={repeat:Qt,clamp:Gt,mirror:Jt},Zt=0,te=1,ee=768,ie=769,se=770,re=771,ae=774,ne=772,oe=773,he=775,le=776,ce=32769,ue=32770,O={zero:Zt,one:te,src:ee,"one-minus-src":ie,"src-alpha":se,"one-minus-src-alpha":re,"dst-alpha":ne,"one-minus-dst-alpha":oe,dst:ae,"one-minus-dst":he,"src-alpha-saturated":le,constant:ce,"one-minus-constant":ue},de=32774,me=32778,pe=32779,fe=32775,ge=32776,lt={add:de,subtract:me,"reverse-subtract":pe,min:fe,max:ge},ct=5126,xe=5120,ye=5122,we=5124,ut=5121,_e=5123,ve=5125,dt=w=>{switch(w.constructor){case Float32Array:return ct;case Int8Array:return xe;case Int16Array:return ye;case Int32Array:return we;case Uint8Array:case Uint8ClampedArray:return ut;case Uint16Array:return _e;case Uint32Array:return ve;default:return null}},be=/[^\w](?:varying|out)\s+\w+\s+(\w+)\s*;/g;class ze{constructor({canvas:t,context:e,...i}={}){c(this,"canvas");c(this,"gl");c(this,"autoClear",!0);c(this,"_c",new k);c(this,"_p",new k);c(this,"_g",new k);c(this,"_b",new k);c(this,"_t",new k);c(this,"_s",new k);c(this,"_f",new k);c(this,"c");c(this,"a",0);c(this,"_v",new L);this.canvas=t??document.createElement("canvas"),this.gl=e??this.canvas.getContext("webgl2",{alpha:!0,depth:!0,premultipliedAlpha:!0,...i})}setSize(t,e){this.canvas.width=t,this.canvas.height=e,this.gl.viewport(0,0,t,e)}d(t){let e=this._s.get(t);if(e||(e=this.gl.createSampler(),this._s.set(t,e),t.needsUpdate=!0),t.needsUpdate){if(t.anisotropy){const s=this.gl.getExtension("EXT_texture_filter_anisotropic");s&&this.gl.samplerParameteri(e,s.TEXTURE_MAX_ANISOTROPY_EXT,t.anisotropy)}const i=t.generateMipmaps?Kt:ot;this.gl.samplerParameteri(e,Mt,ot[t.magFilter]),this.gl.samplerParameteri(e,At,i[t.minFilter]),this.gl.samplerParameteri(e,Ft,ht[t.wrapS]),this.gl.samplerParameteri(e,Ut,ht[t.wrapT]),t.needsUpdate=!1}return e}b(t,e=0,i=0){let s=this._t.get(t);if(s||(s=this.gl.createTexture(),this._t.set(t,s,()=>this.gl.deleteTexture(s)),t.needsUpdate=!0),this.gl.bindTexture(B,s),t.needsUpdate){this.gl.pixelStorei(Tt,1);const r=t.format??St,a=t.type??ut;t.image?this.gl.texImage2D(B,0,r,r,a,t.image):this.gl.texImage2D(B,0,r,e,i,0,r,a,null),t.image instanceof HTMLVideoElement||(t.needsUpdate=!1)}return(t.needsUpdate||t.sampler.needsUpdate)&&(t.sampler.generateMipmaps&&this.gl.generateMipmap(B),this.d(t.sampler)),s}setRenderTarget(t){if(!t)return this.gl.bindFramebuffer(N,null),this.gl.viewport(0,0,this.canvas.width,this.canvas.height);let e=this._f.get(t);if(!e||t.needsUpdate){e&&this.gl.deleteFramebuffer(e),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(N,e);const i=[];let s=zt;for(const r of t.textures){i.push(s);const a=this.b(r,t.width,t.height);this.gl.framebufferTexture2D(N,s,B,a,0),s++}this.gl.drawBuffers(i),t.needsUpdate=!1,this._f.set(t,e,()=>this.gl.deleteFramebuffer(e))}this.gl.bindFramebuffer(N,e),this.gl.viewport(0,0,t.width,t.height)}setDepthTest(t,e=jt){t?(this.gl.enable(Q),this.gl.depthFunc(e)):this.gl.disable(Q)}setDepthMask(t){this.gl.depthMask(t)}setCullSide(t="both"){t==="both"?(this.gl.disable(it),this.gl.disable(Q)):(this.gl.enable(it),this.gl.cullFace(t==="front"?Bt:Dt))}setBlending(t){t?(this.gl.enable(st),this.gl.blendFuncSeparate(O[t.color.srcFactor],O[t.color.dstFactor],O[t.alpha.srcFactor],O[t.alpha.dstFactor]),this.gl.blendEquationSeparate(lt[t.color.operation],lt[t.alpha.operation])):this.gl.disable(st)}e(t,e,i){const s=this.gl.getUniformLocation(t,e);if(s!==-1){if(i instanceof bt){const r=this.a++;this.gl.activeTexture(Nt+r);const a=this._s.get(i.sampler);return a&&this.gl.bindSampler(r,a),this.b(i),this.gl.uniform1i(s,r)}if(typeof i=="number")return this.gl.uniform1f(s,i);switch(i.length){case 2:return this.gl.uniform2fv(s,i);case 3:return this.gl.uniform3fv(s,i);case 4:return this.gl.uniform4fv(s,i);case 9:return this.gl.uniformMatrix3fv(s,!1,i);case 16:return this.gl.uniformMatrix4fv(s,!1,i)}}}compile(t,e){t.material.uniforms.modelMatrix=t.matrix,e&&(t.material.uniforms.projectionMatrix=e.projectionMatrix,t.material.uniforms.viewMatrix=e.viewMatrix,t.material.uniforms.normalMatrix=t.normalMatrix,t.material.uniforms.modelViewMatrix=t.modelViewMatrix,t.modelViewMatrix.copy(e.viewMatrix).multiply(t.matrix),t.normalMatrix.normal(t.modelViewMatrix));let i=this._c.get(t),s=this._p.get(t.material);if(!s){s=this.gl.createProgram(),this._p.set(t.material,s,()=>this.gl.deleteProgram(s));const a=this.gl.createShader(Pt);this.gl.shaderSource(a,t.material.vertex??t.material.compute),this.gl.compileShader(a),this.gl.attachShader(s,a);const n=this.gl.createShader(Vt);this.gl.shaderSource(n,t.material.fragment??`#version 300 es
void main(){}`),this.gl.compileShader(n),this.gl.attachShader(s,n),this.gl.linkProgram(s);for(const o of[a,n]){const h=this.gl.getShaderInfoLog(o);if(h)throw`${h}
${this.gl.getShaderSource(o)}`}if(this.gl.getProgramInfoLog(s))throw`${this.gl.getProgramInfoLog(s)}`;this.gl.deleteShader(a),this.gl.deleteShader(n)}let r=this._g.get(t.geometry);r||(r=this.gl.createVertexArray(),this._g.set(t.geometry,r,()=>this.gl.deleteVertexArray(r))),this.gl.useProgram(s),this.gl.bindVertexArray(r);for(const a in t.geometry.attributes){const n=t.geometry.attributes[a],o=a==="index"?It:rt;let h=this._b.get(n);if(!h||s!==(i==null?void 0:i.program)||r!==(i==null?void 0:i.VAO)){h?this.gl.bindBuffer(o,h):(h=this.gl.createBuffer(),this._b.set(n,h),this.gl.bindBuffer(o,h),this.gl.bufferData(o,n.data,Et),n.needsUpdate=!1);const l=this.gl.getAttribLocation(s,a);if(l!==-1){const p=Y(4,K(1,gt(n.size/3)));for(let m=0;m<p;m++){this.gl.enableVertexAttribArray(l+m);const f=dt(n.data),d=n.size*n.data.BYTES_PER_ELEMENT,g=n.size*m;f===ct?this.gl.vertexAttribPointer(l,n.size,f,!1,d,g):this.gl.vertexAttribIPointer(l,n.size,f,d,g),n.divisor&&this.gl.vertexAttribDivisor(l+m,n.divisor)}}}n.needsUpdate&&(this.gl.bindBuffer(o,h),this.gl.bufferData(o,n.data,kt),n.needsUpdate=!1)}this.a=0;for(const a in t.material.uniforms)this.e(s,a,t.material.uniforms[a]);return i||(i={program:s,VAO:r},this._c.set(t,i)),i}clear(t=qt|Lt|Ct){this.gl.clear(t)}sort(t,e){const i=[];return e!=null&&e.matrixAutoUpdate&&(e.projectionViewMatrix.copy(e.projectionMatrix).multiply(e.viewMatrix),e.frustum.fromMatrix4(e.projectionViewMatrix)),t.traverse(s=>{if(!s.visible)return!0;if(s instanceof et){if(e&&s.frustumCulled&&!e.frustum.contains(s))return!0;i.push(s)}}),i.sort((s,r)=>r.material.depthTest-s.material.depthTest||!!e&&this._v.set(r.matrix[12],r.matrix[13],r.matrix[14]).applyMatrix4(e.projectionViewMatrix).z-this._v.set(s.matrix[12],s.matrix[13],s.matrix[14]).applyMatrix4(e.projectionViewMatrix).z||s.material.transparent-r.material.transparent)}render(t,e){this.autoClear&&this.clear(),t.updateMatrix(),e==null||e.updateMatrix();const i=this.sort(t,e);for(const s of i){this.compile(s,e),this.setDepthTest(s.material.depthTest),this.setDepthMask(s.material.depthWrite),this.setCullSide(s.material.side),this.setBlending(s.material.blending);const r=this.gl[s.mode.toUpperCase()],{index:a,position:n}=s.geometry.attributes,{start:o,count:h}=s.geometry.drawRange;a?this.gl.drawElementsInstanced(r,Y(h,a.data.length/a.size),dt(a.data),o,s.instances):n?this.gl.drawArraysInstanced(r,o,Y(h,n.data.length/n.size),s.instances):this.gl.drawArraysInstanced(r,0,3,s.instances)}}compute(t){const e=this.compile(t);this.gl.bindVertexArray(null),this.gl.bindBuffer(rt,null);const i=this.c??(this.c=this.gl.createTransformFeedback());this.gl.bindTransformFeedback(at,i);let s=0;const r=[];for(const[,n]of t.material.compute.matchAll(be)){const o=t.geometry.attributes[n],h=this._b.get(o);this.gl.bindBufferBase(Rt,r.length,h),s=Math.max(s,o.data.length/o.size),r.push(n)}this.gl.transformFeedbackVaryings(e.program,r,Wt),this.gl.linkProgram(e.program);const a=Ot;this.gl.enable(nt),this.gl.beginTransformFeedback(a),this.gl.bindVertexArray(e.VAO),s?this.gl.drawArraysInstanced(a,0,s,t.instances):this.gl.drawArraysInstanced(a,0,t.instances,1),this.gl.bindVertexArray(null),this.gl.endTransformFeedback(),this.gl.disable(nt),this.gl.bindTransformFeedback(at,null)}}const G=typeof navigator<"u"&&await((mt=navigator.gpu)==null?void 0:mt.requestAdapter());await(G==null?void 0:G.requestDevice());var Me=`#version 300 es
#define PI 3.14159265359
uniform float time;
uniform mat4 normalMatrix;
uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
in vec3 position;
in vec3 normal;
out vec3 vNormal;
uniform float u_pointsize;
uniform float u_noise_amp_1;
uniform float u_noise_freq_1;
uniform float u_spd_modifier_1;
uniform float u_noise_amp_2;
uniform float u_noise_freq_2;
uniform float u_spd_modifier_2;

float random (in vec2 st) {
    return fract(sin(dot(st.xy,
    vec2(12.9898,78.233)))
    * 43758.5453123);
}

float noise (in vec2 st) {
    vec2 i = floor(st);
    vec2 f = fract(st);

    
    float a = random(i);
    float b = random(i + vec2(1.0, 0.0));
    float c = random(i + vec2(0.0, 1.0));
    float d = random(i + vec2(1.0, 1.0));

    

    
    vec2 u = f*f*(3.0-2.0*f);
    

    
    return mix(a, b, u.x) +
    (c - a)* u.y * (1.0 - u.x) +
    (d - b) * u.x * u.y;
}

mat2 rotate2d(float angle){
    return mat2(cos(angle),-sin(angle),
    sin(angle),cos(angle));
}

void main() {
    vNormal = (normalMatrix * vec4(normal, 0)).xyz;

    gl_PointSize = u_pointsize;
    vec3 pos = position;
    pos.z += noise(pos.xy * u_noise_freq_1 + time * u_spd_modifier_1) * u_noise_amp_1;
    pos.z += noise(rotate2d(PI / 4.) * pos.yx * u_noise_freq_2 - time * u_spd_modifier_2 * 0.6) * u_noise_amp_2;
    vec4 mvm = modelViewMatrix * vec4(pos, 1.0);
    gl_Position = projectionMatrix * mvm;
}`,Ae=`#version 300 es
precision mediump float;
precision lowp float;

uniform vec3 color;
in vec3 vNormal;
out vec4 pc_fragColor;
uniform vec3 u_color_start;
uniform vec3 u_color_end;
uniform vec2 u_resolution;

void main() {
    vec2 st = normalize(gl_FragCoord.xy);
    float t = st.x;

    float lighting = dot(vNormal, normalize(vec3(10)));
    vec3 c = mix(u_color_end, u_color_start, t);

    pc_fragColor = vec4(mix(c, vec3(0.059,0.063,0.188), 0.5), 0.9);
}`;({init:(w,t=window.innerWidth,e=window.innerHeight)=>{const i={width:t,height:e},s=new ze({antialias:!0});w.appendChild(s.canvas);const r=window.devicePixelRatio;s.canvas.width=Math.floor(i.width*r),s.canvas.height=Math.floor(i.height*r),s.setSize(i.width*r,i.height*r),s.canvas.style.width=i.width+"px",s.canvas.style.height=i.height+"px",s.gl.viewport(0,0,i.width*r,i.height*r);const a=new _t(45,i.height/i.width);a.position.z=5;const n=300,o=100,h=6/n,l=2/o;let p=[],m=[],f=[],d=0;for(let _=0;_<=o;_++)for(let v=0;v<=n;v++)p.push(v*h-3,_*l-3,0),f.push(v/n,_/o),v<n&&m.push(d,d+1),d++;const g=new Z({position:{size:3,data:new Float32Array(p)},uv:{size:2,data:new Float32Array(f)},index:{size:1,data:new Uint16Array(m)}}),x=new tt({transparent:!0,uniforms:{time:0,color:[1,.4,.7],u_noise_freq_1:3,u_noise_amp_1:.2,u_spd_modifier_1:.1,u_noise_freq_2:2,u_noise_amp_2:.3,u_spd_modifier_2:.1,u_pointsize:2,u_color_start:[0,.243,.612],u_color_end:[.518,.302,.804]},vertex:Me,fragment:Ae}),y=new et(g,x);y.mode="lines",s.render(y,a),performance.now(),y.position.y+=0,y.quaternion.fromEuler(-.7,0,0);function u(_){requestAnimationFrame(u),y.material.uniforms.time=_/1e3,s.render(y,a)}requestAnimationFrame(u)}}).init(document.getElementById("wave-bg"))})()